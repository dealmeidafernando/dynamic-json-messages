var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.arrayIteratorImpl=function(a){var b=0;return function(){return b<a.length?{done:!1,value:a[b++]}:{done:!0}}};$jscomp.arrayIterator=function(a){return{next:$jscomp.arrayIteratorImpl(a)}};$jscomp.makeIterator=function(a){var b="undefined"!=typeof Symbol&&Symbol.iterator&&a[Symbol.iterator];return b?b.call(a):$jscomp.arrayIterator(a)};
$jscomp.getGlobal=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global&&null!=global?global:a};$jscomp.global=$jscomp.getGlobal(this);$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,d){a!=Array.prototype&&a!=Object.prototype&&(a[b]=d.value)};
$jscomp.polyfill=function(a,b,d,g){if(b){d=$jscomp.global;a=a.split(".");for(g=0;g<a.length-1;g++){var h=a[g];h in d||(d[h]={});d=d[h]}a=a[a.length-1];g=d[a];b=b(g);b!=g&&null!=b&&$jscomp.defineProperty(d,a,{configurable:!0,writable:!0,value:b})}};$jscomp.FORCE_POLYFILL_PROMISE=!1;
$jscomp.polyfill("Promise",function(a){function b(){this.batch_=null}function d(a){return a instanceof h?a:new h(function(b,k){b(a)})}if(a&&!$jscomp.FORCE_POLYFILL_PROMISE)return a;b.prototype.asyncExecute=function(a){if(null==this.batch_){this.batch_=[];var b=this;this.asyncExecuteFunction(function(){b.executeBatch_()})}this.batch_.push(a)};var g=$jscomp.global.setTimeout;b.prototype.asyncExecuteFunction=function(a){g(a,0)};b.prototype.executeBatch_=function(){for(;this.batch_&&this.batch_.length;){var a=
this.batch_;this.batch_=[];for(var b=0;b<a.length;++b){var d=a[b];a[b]=null;try{d()}catch(L){this.asyncThrow_(L)}}}this.batch_=null};b.prototype.asyncThrow_=function(a){this.asyncExecuteFunction(function(){throw a;})};var h=function(a){this.state_=0;this.result_=void 0;this.onSettledCallbacks_=[];var b=this.createResolveAndReject_();try{a(b.resolve,b.reject)}catch(u){b.reject(u)}};h.prototype.createResolveAndReject_=function(){function a(a){return function(k){d||(d=!0,a.call(b,k))}}var b=this,d=!1;
return{resolve:a(this.resolveTo_),reject:a(this.reject_)}};h.prototype.resolveTo_=function(a){if(a===this)this.reject_(new TypeError("A Promise cannot resolve to itself"));else if(a instanceof h)this.settleSameAsPromise_(a);else{a:switch(typeof a){case "object":var b=null!=a;break a;case "function":b=!0;break a;default:b=!1}b?this.resolveToNonPromiseObj_(a):this.fulfill_(a)}};h.prototype.resolveToNonPromiseObj_=function(a){var b=void 0;try{b=a.then}catch(u){this.reject_(u);return}"function"==typeof b?
this.settleSameAsThenable_(b,a):this.fulfill_(a)};h.prototype.reject_=function(a){this.settle_(2,a)};h.prototype.fulfill_=function(a){this.settle_(1,a)};h.prototype.settle_=function(a,b){if(0!=this.state_)throw Error("Cannot settle("+a+", "+b+"): Promise already settled in state"+this.state_);this.state_=a;this.result_=b;this.executeOnSettledCallbacks_()};h.prototype.executeOnSettledCallbacks_=function(){if(null!=this.onSettledCallbacks_){for(var a=0;a<this.onSettledCallbacks_.length;++a)m.asyncExecute(this.onSettledCallbacks_[a]);
this.onSettledCallbacks_=null}};var m=new b;h.prototype.settleSameAsPromise_=function(a){var b=this.createResolveAndReject_();a.callWhenSettled_(b.resolve,b.reject)};h.prototype.settleSameAsThenable_=function(a,b){var d=this.createResolveAndReject_();try{a.call(b,d.resolve,d.reject)}catch(L){d.reject(L)}};h.prototype.then=function(a,b){function d(a,b){return"function"==typeof a?function(b){try{g(a(b))}catch(X){k(X)}}:b}var g,k,m=new h(function(a,b){g=a;k=b});this.callWhenSettled_(d(a,g),d(b,k));return m};
h.prototype["catch"]=function(a){return this.then(void 0,a)};h.prototype.callWhenSettled_=function(a,b){function d(){switch(g.state_){case 1:a(g.result_);break;case 2:b(g.result_);break;default:throw Error("Unexpected state: "+g.state_);}}var g=this;null==this.onSettledCallbacks_?m.asyncExecute(d):this.onSettledCallbacks_.push(d)};h.resolve=d;h.reject=function(a){return new h(function(b,d){d(a)})};h.race=function(a){return new h(function(b,g){for(var h=$jscomp.makeIterator(a),k=h.next();!k.done;k=
h.next())d(k.value).callWhenSettled_(b,g)})};h.all=function(a){var b=$jscomp.makeIterator(a),g=b.next();return g.done?d([]):new h(function(a,h){function k(b){return function(d){m[b]=d;u--;0==u&&a(m)}}var m=[],u=0;do m.push(void 0),u++,d(g.value).callWhenSettled_(k(m.length-1),h),g=b.next();while(!g.done)})};return h},"es6","es3");
$jscomp.polyfill("Promise.prototype.finally",function(a){return a?a:function(a){return this.then(function(b){return Promise.resolve(a()).then(function(){return b})},function(b){return Promise.resolve(a()).then(function(){throw b;})})}},"es9","es3");$jscomp.SYMBOL_PREFIX="jscomp_symbol_";$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};
$jscomp.SymbolClass=function(a,b){this.$jscomp$symbol$id_=a;$jscomp.defineProperty(this,"description",{configurable:!0,writable:!0,value:b})};$jscomp.SymbolClass.prototype.toString=function(){return this.$jscomp$symbol$id_};$jscomp.Symbol=function(){function a(d){if(this instanceof a)throw new TypeError("Symbol is not a constructor");return new $jscomp.SymbolClass($jscomp.SYMBOL_PREFIX+(d||"")+"_"+b++,d)}var b=0;return a}();
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var a=$jscomp.global.Symbol.iterator;a||(a=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("Symbol.iterator"));"function"!=typeof Array.prototype[a]&&$jscomp.defineProperty(Array.prototype,a,{configurable:!0,writable:!0,value:function(){return $jscomp.iteratorPrototype($jscomp.arrayIteratorImpl(this))}});$jscomp.initSymbolIterator=function(){}};
$jscomp.initSymbolAsyncIterator=function(){$jscomp.initSymbol();var a=$jscomp.global.Symbol.asyncIterator;a||(a=$jscomp.global.Symbol.asyncIterator=$jscomp.global.Symbol("Symbol.asyncIterator"));$jscomp.initSymbolAsyncIterator=function(){}};$jscomp.iteratorPrototype=function(a){$jscomp.initSymbolIterator();a={next:a};a[$jscomp.global.Symbol.iterator]=function(){return this};return a};$jscomp.underscoreProtoCanBeSet=function(){var a={a:!0},b={};try{return b.__proto__=a,b.a}catch(d){}return!1};
$jscomp.setPrototypeOf="function"==typeof Object.setPrototypeOf?Object.setPrototypeOf:$jscomp.underscoreProtoCanBeSet()?function(a,b){a.__proto__=b;if(a.__proto__!==b)throw new TypeError(a+" is not extensible");return a}:null;$jscomp.generator={};$jscomp.generator.ensureIteratorResultIsObject_=function(a){if(!(a instanceof Object))throw new TypeError("Iterator result "+a+" is not an object");};
$jscomp.generator.Context=function(){this.isRunning_=!1;this.yieldAllIterator_=null;this.yieldResult=void 0;this.nextAddress=1;this.finallyAddress_=this.catchAddress_=0;this.finallyContexts_=this.abruptCompletion_=null};$jscomp.generator.Context.prototype.start_=function(){if(this.isRunning_)throw new TypeError("Generator is already running");this.isRunning_=!0};$jscomp.generator.Context.prototype.stop_=function(){this.isRunning_=!1};
$jscomp.generator.Context.prototype.jumpToErrorHandler_=function(){this.nextAddress=this.catchAddress_||this.finallyAddress_};$jscomp.generator.Context.prototype.next_=function(a){this.yieldResult=a};$jscomp.generator.Context.prototype.throw_=function(a){this.abruptCompletion_={exception:a,isException:!0};this.jumpToErrorHandler_()};$jscomp.generator.Context.prototype["return"]=function(a){this.abruptCompletion_={"return":a};this.nextAddress=this.finallyAddress_};
$jscomp.generator.Context.prototype.jumpThroughFinallyBlocks=function(a){this.abruptCompletion_={jumpTo:a};this.nextAddress=this.finallyAddress_};$jscomp.generator.Context.prototype.yield=function(a,b){this.nextAddress=b;return{value:a}};$jscomp.generator.Context.prototype.yieldAll=function(a,b){var d=$jscomp.makeIterator(a),g=d.next();$jscomp.generator.ensureIteratorResultIsObject_(g);if(g.done)this.yieldResult=g.value,this.nextAddress=b;else return this.yieldAllIterator_=d,this.yield(g.value,b)};
$jscomp.generator.Context.prototype.jumpTo=function(a){this.nextAddress=a};$jscomp.generator.Context.prototype.jumpToEnd=function(){this.nextAddress=0};$jscomp.generator.Context.prototype.setCatchFinallyBlocks=function(a,b){this.catchAddress_=a;void 0!=b&&(this.finallyAddress_=b)};$jscomp.generator.Context.prototype.setFinallyBlock=function(a){this.catchAddress_=0;this.finallyAddress_=a||0};$jscomp.generator.Context.prototype.leaveTryBlock=function(a,b){this.nextAddress=a;this.catchAddress_=b||0};
$jscomp.generator.Context.prototype.enterCatchBlock=function(a){this.catchAddress_=a||0;a=this.abruptCompletion_.exception;this.abruptCompletion_=null;return a};$jscomp.generator.Context.prototype.enterFinallyBlock=function(a,b,d){d?this.finallyContexts_[d]=this.abruptCompletion_:this.finallyContexts_=[this.abruptCompletion_];this.catchAddress_=a||0;this.finallyAddress_=b||0};
$jscomp.generator.Context.prototype.leaveFinallyBlock=function(a,b){var d=this.finallyContexts_.splice(b||0)[0];if(d=this.abruptCompletion_=this.abruptCompletion_||d){if(d.isException)return this.jumpToErrorHandler_();void 0!=d.jumpTo&&this.finallyAddress_<d.jumpTo?(this.nextAddress=d.jumpTo,this.abruptCompletion_=null):this.nextAddress=this.finallyAddress_}else this.nextAddress=a};$jscomp.generator.Context.prototype.forIn=function(a){return new $jscomp.generator.Context.PropertyIterator(a)};
$jscomp.generator.Context.PropertyIterator=function(a){this.object_=a;this.properties_=[];for(var b in a)this.properties_.push(b);this.properties_.reverse()};$jscomp.generator.Context.PropertyIterator.prototype.getNext=function(){for(;0<this.properties_.length;){var a=this.properties_.pop();if(a in this.object_)return a}return null};$jscomp.generator.Engine_=function(a){this.context_=new $jscomp.generator.Context;this.program_=a};
$jscomp.generator.Engine_.prototype.next_=function(a){this.context_.start_();if(this.context_.yieldAllIterator_)return this.yieldAllStep_(this.context_.yieldAllIterator_.next,a,this.context_.next_);this.context_.next_(a);return this.nextStep_()};
$jscomp.generator.Engine_.prototype.return_=function(a){this.context_.start_();var b=this.context_.yieldAllIterator_;if(b)return this.yieldAllStep_("return"in b?b["return"]:function(a){return{value:a,done:!0}},a,this.context_["return"]);this.context_["return"](a);return this.nextStep_()};
$jscomp.generator.Engine_.prototype.throw_=function(a){this.context_.start_();if(this.context_.yieldAllIterator_)return this.yieldAllStep_(this.context_.yieldAllIterator_["throw"],a,this.context_.next_);this.context_.throw_(a);return this.nextStep_()};
$jscomp.generator.Engine_.prototype.yieldAllStep_=function(a,b,d){try{var g=a.call(this.context_.yieldAllIterator_,b);$jscomp.generator.ensureIteratorResultIsObject_(g);if(!g.done)return this.context_.stop_(),g;var h=g.value}catch(m){return this.context_.yieldAllIterator_=null,this.context_.throw_(m),this.nextStep_()}this.context_.yieldAllIterator_=null;d.call(this.context_,h);return this.nextStep_()};
$jscomp.generator.Engine_.prototype.nextStep_=function(){for(;this.context_.nextAddress;)try{var a=this.program_(this.context_);if(a)return this.context_.stop_(),{value:a.value,done:!1}}catch(b){this.context_.yieldResult=void 0,this.context_.throw_(b)}this.context_.stop_();if(this.context_.abruptCompletion_){a=this.context_.abruptCompletion_;this.context_.abruptCompletion_=null;if(a.isException)throw a.exception;return{value:a["return"],done:!0}}return{value:void 0,done:!0}};
$jscomp.generator.Generator_=function(a){this.next=function(b){return a.next_(b)};this["throw"]=function(b){return a.throw_(b)};this["return"]=function(b){return a.return_(b)};$jscomp.initSymbolIterator();this[Symbol.iterator]=function(){return this}};$jscomp.generator.createGenerator=function(a,b){var d=new $jscomp.generator.Generator_(new $jscomp.generator.Engine_(b));$jscomp.setPrototypeOf&&$jscomp.setPrototypeOf(d,a.prototype);return d};
$jscomp.asyncExecutePromiseGenerator=function(a){function b(b){return a.next(b)}function d(b){return a["throw"](b)}return new Promise(function(g,h){function m(a){a.done?g(a.value):Promise.resolve(a.value).then(b,d).then(m,h)}m(a.next())})};$jscomp.asyncExecutePromiseGeneratorFunction=function(a){return $jscomp.asyncExecutePromiseGenerator(a())};$jscomp.asyncExecutePromiseGeneratorProgram=function(a){return $jscomp.asyncExecutePromiseGenerator(new $jscomp.generator.Generator_(new $jscomp.generator.Engine_(a)))};
var DJM=function(){var a={},b={},d={},g={},h="",m="",k="",Q=!0,u=!1,L=!1,ea=!1,Z=!(!chrome||!chrome.extension),M=!!/^https?/.test(window.location.href),R=function(a,b){a=void 0===a?"":a;return $jscomp.asyncExecutePromiseGeneratorProgram(function(c){if(M)return chrome.runtime.sendMessage({DJM_LoadJSONFileAsync:!0,jsonFileFullPath:a},function(a){k=a;b(a)}),c["return"]();m=a;h=m.substr(m.lastIndexOf("/")+1);return c.yield(fetch(m).then(function(a){return a.json()}).then(function(a){k=a})["catch"](function(a){return console.log('[DJM] Error loading "'+
m+'": '+a.message)})["finally"](function(){b&&"function"===typeof b&&b(k)}),0)})},fa=function(a){var b=void 0===a.isRefreshable?!0:a.isRefreshable,c=void 0===a.appendResponses?!1:a.appendResponses,d=void 0===a.replaceOnWorker?!1:a.replaceOnWorker;a=void 0===a.mergeOnWorker?!1:a.mergeOnWorker;M?chrome.runtime.sendMessage({DJM_Settings:!0,data:{isRefreshable:b,appendResponses:c,replaceOnWorker:d,mergeOnWorker:a}}):(Q=b,u=c,L=d,ea=a)},X=function(a){for(var b=[],c=0;c<arguments.length;++c)b[c-0]=arguments[c];
var d=$jscomp.makeIterator(b);c=d.next().value;var l=d.next().value;b=$jscomp.makeIterator(b);b.next();b.next();b=b.next().value;d=c;var g=!1;if(l=l.merge)for(var h=l.length,k=0;k<h;k++){var m=l[k],T=!!+m.active;if((void 0===m.active||T)&&k>b.lastKeyIndex){b.lastKeyIndex=k;d=m.key;g=d===c;break}k===h-1&&(b={lastKeyIndex:-1,canUpdateJsonString:!0,lastUpdatedKey:void 0})}b.swappedKey=d;return{nextKey:d,mainKeyManager:b,mainKeyRepeated:g}},aa=new Worker(URL.createObjectURL(new Blob(["onmessage = e => postMessage(("+
X.toString()+").call(this, ...e.data));"],{type:"application/javascript"}))),ka=function(a){for(var b=[],c=0;c<arguments.length;++c)b[c-0]=arguments[c];c=$jscomp.makeIterator(b);b=c.next().value;c=c.next().value;var d=b[c.onProp],l=c.replace;if(d&&l){l=l.length;for(var g=0;g<l;g++){var h=c.replace[g];b[c.onProp]=d=d.replace(h.here,h.to)}}return b},la=new Worker(URL.createObjectURL(new Blob(["onmessage = e => postMessage(("+ka.toString()+").call(this, ...e.data));"],{type:"application/javascript"}))),
oa=function(){return{_Exclude:function(a){a=void 0===a?"":a;var b=[];return{_AddExclude:function(a,c){b[b.length]={match:void 0===a?"":a,active:c}},_GetTemplate:function(){return{onProp:a,exclude:b}}}},_Merge:function(){var a=[];return{_AddKey:function(b,c){a[a.length]={key:void 0===b?"":b,active:c}},_GetTemplate:function(){return{merge:a}}}},_Replace:function(a){a=void 0===a?"":a;var b=[];return{_AddReplace:function(a,c){b[b.length]={here:void 0===a?"":a,to:void 0===c?"":c}},_GetTemplate:function(){return{onProp:a,
replace:b}}}}}}(),na=new Worker(URL.createObjectURL(new Blob(["onmessage="+function(a){function b(a,b,g,h,k){function l(a,b){f["*DJM_canResponse"]||(f=void 0,e.lastResponseParentNode=void 0);e.resultSentBefore="result"===a;c.excludeTemplate=void 0;c.jsonStringKey=D;c.reloaded=H;c.nestedNodes.length=n.length;c.savedInfo=e;c.skipToNode=A;c.dataAttribs=f;c.dataIndex=r;c.retrievedResponseNodeLevel=z;c.retrievedResponseValueNodeLevel=C;postMessage({type:a,swapKey:b,data:c})}function m(a,b,c,d){A[a][b]=
{parentResponseNodeLevel:c,returnedResponseNodeLevel:d}}function v(a,b,c){A[a]={sequenceNodeLevel:b,updateOnNextTime:c}}function J(a,b,c){b=a[b];return{exists:void 0!==b,value:b,parentLength:(void 0===c?0:c)?Object.values(a).length:void 0}}function K(a,b){b=void 0===b?!1:b;var c=!1,d=!1;if(h){var e=h.onProp,f=h.exclude;if(e&&f){e=J(a,e);c=c?c:e.exists;if(!c)return{nodeHasOnProp:c,excluded:d};for(var g=f.length,l=0;l<g;l++){var q=f[l];d=q.active;q=e.value===q.match;var k=!!+d;if(d=q&&void 0===d||q&&
k){a["*DJM_finished"]=!b;break}}}}return{nodeHasOnProp:c,excluded:a["*DJM_hasPendingResponse"]?!1:d}}function u(a){void 0===A[a["*DJM_sequenceId"]]&&v(a["*DJM_sequenceId"],0);for(var b,c,d=a.sequence.length,e=0;e<d;e++){if(!K(a.sequence[e]).excluded&&(void 0===b&&(b=e),e>A[a["*DJM_sequenceId"]].sequenceNodeLevel)){c=e;break}e===d-1&&(c=b)}return c}function p(b){var c;if(void 0!==f&&f["*DJM_canResponse"]&&(!d.isExcluded||e.resultSentBefore)){if(void 0===f.response.length)throw Error('["'+q+'" >> "'+
a+"\"]\nAll 'response' nested properties must be enclosed as array.");void 0===A[b]&&(A[b]={});(c=void 0===A[b][e.responseId])&&m(b,e.responseId,0,0);d.allReturnedResponseExcluded=void 0;for(var l,g,h,k,H=A[b][e.responseId],D=e.lastResponseParentNode.response.length,r=0;r<D;r++){e.lastResponseParentNode.response[r]["*isResponseLevel"]=!0;var v=e.lastResponseParentNode.response[r][b];if(v)for(var ja=v.length,u=0;u<ja;u++)if(!K(v[u],!0).excluded&&(void 0===l&&(l=r),void 0===h&&(h=u),r===H.parentResponseNodeLevel&&
u>H.returnedResponseNodeLevel||c&&u>=H.returnedResponseNodeLevel||r>H.parentResponseNodeLevel)){g=r;k=u;break}if(void 0!==g)break;r===D-1?(g=l,k=h,d.allReturnedResponseExcluded=void 0===g&&void 0===k,d.allReturnedResponseExcluded||(e.lastResponseParentNode.response[g]["*DJM_skipped"]=void 0,e.lastResponseParentNode.response[g][b][k]["*DJM_skipped"]=void 0)):e.lastResponseParentNode.response[r]["*DJM_skipped"]=!0}c=k;d.allReturnedResponseExcluded||void 0===c||(m(b,e.responseId,g,c),z=A[b][e.responseId].parentResponseNodeLevel,
C=A[b][e.responseId].returnedResponseNodeLevel,f["*DJM_canResponse"]=f["*DJM_skipped"]=void 0,f["*DJM_returnedResponse"]=b,e.lastReturnedResponse=b,e.hasResponded=!0,n[n.length]=f,t(f.response,z,!0,f["*DJM_returnedResponse"]))}}function t(c,g,h,m,p,B){g=void 0===g?0:g;try{if(!ja)throw Error('["'+q+'" >> "'+a+'"]\nJSON file not loaded.');if(void 0===c)throw Error('["'+q+'" >> "'+a+"\"]\nThere's no data for the specified JSON key.");r=g;f=c[r];g=r;var w=J(f,"sequence",!0),G=J(f,"response"),N=J(f,"*repeatResponse"),
I=J(f,"*required"),S=J(f,"*alternate"),O=f&&void 0!==f["*DJM_shown"],T=f&&void 0!==f["*DJM_finished"],E=f&&void 0!==f["*DJM_skipped"];if(!O){if(w.exists){var L=f.sequence.length;if(void 0===L)throw Error('["'+q+'" >> "'+a+"\"]\nAll 'sequence' nested nodes must be enclosed as array.");if(0===L)throw Error('["'+q+'" >> "'+a+'"]\nAt least must exist one sequence nested node.');}else if(G.exists){var R=f.response.length;if(void 0===R)throw Error('["'+q+'" >> "'+a+"\"]\nAll 'response' nested nodes must be enclosed as array.");
if(0===R)throw Error('["'+q+'" >> "'+a+"\"]\nAt least must exist one response value node on 'response' nested node.");}else{var ma=c.length;if(void 0===ma)throw Error('["'+q+'" >> "'+a+'"]\nAll nodes must be enclosed as array.');if(0===ma)throw Error('["'+q+'" >> "'+a+"\"]\nCan't exist empty nodes.");}if(G.exists&&w.exists)throw Error('["'+q+'" >> "'+a+"\"]\nNodes must not have both 'response' and 'sequence' properties at the same time.");if(!G.exists&&N.exists)throw Error('["'+q+'" >> "'+a+"\"]\nThe '*repeatResponse' property must exist on parent response nodes only.");
if(!G.exists&&I.exists)throw Error('["'+q+'" >> "'+a+"\"]\nThe '*required' property must exist on parent response nodes only.");if(!w.exists&&S.exists)throw Error('["'+q+'" >> "'+a+"\"]\nThe '*alternate' property must exist on parent sequence nodes only.");0===n.length&&(H&&(H=JSON.parse(JSON.stringify(H))),e.rootNodeIndex=++e.rootNodeIndex||0,z=0);e.resultObject=JSON.parse(JSON.stringify(f));f["*DJM_shown"]=!1}T||(f["*DJM_finished"]=!1);G.exists&&(e.isRepeatResponse=void 0);if(G.exists&&f["*DJM_shown"]){f["*DJM_canResponse"]=
void 0;var U=f.response.length;for(c=0;c<U&&(r=c,f.response[c]["*DJM_finished"]||f.response[c]["*DJM_skipped"]);c++);if(e.canFlow){n[n.length]=f;t(f.response,r,!0,f["*DJM_returnedResponse"],!0);return}if(!e.hasResponded){d.allReturnedResponseExcluded=void 0;p=!1;for(var Q=n.length-1;0<=Q;Q--){var V=n[Q];if(V.sequence){var M=V["*DJM_sequenceId"];if(!K(V).excluded)if(V["*alternate"])v(M,void 0!==A[M]?A[M].sequenceNodeLevel:0,!0);else for(var X=V.sequence.length,x=0;x<X;x++)if(E=void 0!==V.sequence[x]["*DJM_skipped"],
O=void 0!==V.sequence[x]["*DJM_shown"],!E&&!O){v(M+":P",x);p=!0;break}}if(p)break}n.length=0;e.responseHasPendingAlternateFromParent=void 0;if(p)e.canFlow=!0;else if(D.shift(),0===D.length){e.resultSentBefore=void 0;e.rootNodeIndex=void 0;e.lastResponseParentNode=void 0;C=z=0;e.responseId=void 0;e.lastReturnedResponse=void 0;e.lastSequenceIsAlternate=void 0;e.canFlow=void 0;D=H;b?l("recall",!0):t(D,0);return}t(D,0);return}}if(h){var ha=f[m].length;if(void 0===ha)throw Error('["'+q+'" >> "'+a+'"]\nAll returned response value nested properties must be enclosed as array.');
for(E=0;E<ha&&(r=E,1<ha&&0<C&&E<C&&(f[m][E]["*DJM_skipped"]=!0),f[m][E]["*DJM_finished"]||f[m][E]["*DJM_skipped"]);E++);f["*DJM_shown"]=!0;n[n.length]=f;t(f[m],r,!1,m,!0)}else{var ia=K(f,p);d.isExcluded=ia.excluded;if(!d.isExcluded&&(f["*DJM_shown"]&&w.exists||w.exists&&(1===w.parentLength||(S.exists||ia.nodeHasOnProp)&&w.parentLength===2+(ia.nodeHasOnProp?1:0)))){f["*DJM_shown"]||(e.isAlternate=!!+S.value,f["*DJM_shown"]=!0);p=E=!1;e.responseHasPendingAlternateFromParent||(f["*DJM_sequenceId"]="root:"+
e.rootNodeIndex+"-parent_response:"+z+"-index:"+g+"-level:"+n.length);var F=f["*DJM_sequenceId"],P=f["*alternate"]=!!+f["*alternate"];P&&(e.lastSequenceIsAlternate=!0,(p=void 0!==A[F])&&A[F].updateOnNextTime&&v(F,u(f)));var Y=f.sequence.length;for(x=0;x<Y&&(r=x,P?!p&&K(f.sequence[x]).excluded?f.sequence[x]["*DJM_skipped"]=E=!0:p&&x<A[F].sequenceNodeLevel&&(f.sequence[x]["*DJM_skipped"]=!0):K(f.sequence[x]).excluded&&(f.sequence[x]["*DJM_skipped"]=!0),void 0!==A[F+":P"]&&(x<A[F+":P"].sequenceNodeLevel?
f.sequence[x]["*DJM_skipped"]=!0:A[F+":P"]=void 0),!f.sequence[x]["*DJM_canResponse"]&&(f.sequence[x]["*DJM_finished"]||f.sequence[x]["*DJM_skipped"]||f.sequence[x]["*DJM_done"]));x++);E&&v(F,r);e.responseHasPendingAlternateFromParent||(n[n.length]=f);t(f.sequence,r,void 0,void 0,void 0,!0)}else if(!f["*DJM_shown"]){if(!d.isExcluded){(e.resultObject.isSequence=B)&&e.isAlternate&&(e.resultObject.isAlternate=!0,e.isAlternate=void 0);e.resultObject.isResponse=p;e.resultObject.response=p?m:void 0;G.exists&&
(e.resultObject.hasResponse=!0);p&&e.isRepeatResponse&&(e.resultObject.isRepeatResponse=!0,e.isRepeatResponse=void 0);w.exists&&(e.resultObject.hasSequence=!0,e.resultObject.sequence=void 0);S.exists&&(+S.value&&(e.isAlternate=!0,e.resultObject.hasAlternate=!0),e.resultObject["*alternate"]=void 0);N.exists&&(+N.value&&(e.isRepeatResponse=!0,e.resultObject.hasRepeatResponse=!0),e.resultObject["*repeatResponse"]=void 0);if(I.exists){var ca=I.value;F=!!+ca;e.resultObject.hasRequired=F||ca&&ca.constructor&&
ca.constructor===Object;e.resultObject["*required"]=void 0;e.requiredResult=e.resultObject.hasRequired&&F?e.resultObject:ca}f["*DJM_shown"]=!0;w.exists||G.exists||(f["*DJM_finished"]=!0);if(w.exists)e.canFlow=void 0!==e.lastReturnedResponse;else if(G.exists){f["*DJM_canResponse"]=f["*DJM_skipped"]=!0;e.canFlow=void 0;e.hasResponded=void 0;e.responseId=f["*DJM_responseId"]="root:"+e.rootNodeIndex+"-index:"+g+"-response:"+z+"-"+(void 0===e.responseId||void 0===e.lastReturnedResponse?"default":e.lastReturnedResponse)+
":"+n.length;e.lastResponseParentNode=f;e.responseHasPendingAlternateFromParent=e.lastSequenceIsAlternate;if(k){var ba=f.response.map(function(a){return Object.keys(a)}).reduce(function(a,b){return a.concat(b)});e.resultObject.responses=ba.filter(function(a,b){return ba.indexOf(a)===b})}e.resultObject.isSequence&&(n[n.length-1]["*DJM_hasPendingResponse"]=!0);l("result");return}}P=F=!1;if(!d.isExcluded||d.isExcluded&&(B||p))for(x=n.length-1;0<=x;x--){var y=n[x],da=void 0!==y.sequence,ea=y["*alternate"],
fa=void 0!==y.response;if((p=y["*isResponseLevel"])&&!P){B=0;var Z=y[e.lastReturnedResponse].length;for(Y=0;Y<Z;Y++)if((E=void 0!==y[e.lastReturnedResponse][Y]["*DJM_skipped"])&&B++,y[e.lastReturnedResponse][Y]["*DJM_finished"]){P=!0;break}y["*DJM_finished"]=B+(P?1:0)===Z}else if(da){F=!0;for(var W=y.sequence.length-1;0<=W&&(y.sequence[W]["*DJM_finished"]||y.sequence[W]["*DJM_skipped"]||y.sequence[W]["*DJM_done"]||y["*alternate"]&&!y.sequence[W]["*DJM_shown"]);W--)y["*DJM_finished"]=0===W,F=!y["*DJM_finished"]}else if(fa)if(P)y["*DJM_done"]=
!0;else{var aa=y.response.length-1;y["*DJM_finished"]=y.response[aa]["*DJM_finished"]||y.response[aa]["*DJM_skipped"]}ea&&(y["*DJM_finished"]||y["*DJM_skipped"])&&(currentSequenceId=y["*DJM_sequenceId"],v(currentSequenceId,void 0!==A[currentSequenceId]?A[currentSequenceId].sequenceNodeLevel:0,!0));if(P&&F)break}E=P&&!F;(D[0]["*DJM_finished"]||D[0]["*DJM_skipped"]||E)&&D.shift();E&&(e.responseId=void 0);e.responseHasPendingAlternateFromParent=void 0;C=z=0;n.length=0;e.allNodesExcluded=d.isExcluded&&
!e.resultSentBefore;if(0===D.length){if(e.resultSentBefore=void 0,e.rootNodeIndex=void 0,e.responseId=void 0,e.lastResponseParentNode=void 0,e.lastSequenceIsAlternate=void 0,H?(D=H,H=void 0,d.isExcluded?e.allNodesExcluded||t(D,0):l("result")):d.isExcluded?e.allNodesExcluded||l("recall",b):l("result",b),e.allNodesExcluded)throw Error('["'+q+'" >> "'+a+'"]\nDo not exclude all nodes!');}else d.isExcluded?t(D,0):l("result")}}}catch(pa){e.resultObject=pa.message,l("exception")}}var B=c,D=B.jsonStringKey,
H=B.reloaded,f=B.dataAttribs,r=B.dataIndex,z=B.retrievedResponseNodeLevel,C=B.retrievedResponseValueNodeLevel;B=c;var n=B.nestedNodes,q=B.jsonFileName,ja=B.jsonStringLoaded,e=B.savedInfo,A=B.skipToNode;e.allNodesExcluded?(c.savedInfo.allNodesExcluded=void 0,postMessage({type:"recall",swapKey:b,data:c})):d.isExcluded||""!==g?""!==g&&p(g):t(D,0)}var c,d={};(function(a,b){void 0===a.instance?(a.nestedNodes=[],a.savedInfo={},a.skipToNode={},a.dataAttribs={},a.dataIndex=0,a.retrievedResponseNodeLevel=
0,a.retrievedResponseValueNodeLevel=0,c=a):c=a.instance;b({key:a.key,handledKey:a.handledKey,response:a.response,excludeTemplate:a.excludeTemplate,canAppendResponses:a.canAppendResponses})})(a.data,function(a){b(a.key,a.handledKey,a.response,a.excludeTemplate,a.canAppendResponses)})}],{type:"application/javascript"}))),da=function(c,S){function v(a){return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){g[c]&&(J||(a.jsonStringKey=k[c]),g[c]=void 0);na.postMessage(void 0===a?{key:c,jsonFileName:h,
jsonStringLoaded:""!==k,jsonStringKey:k[c],handledKey:""===C&&void 0!==I||""!==C&&void 0!==p,response:C,excludeTemplate:T,canAppendResponses:u}:{key:c,instance:a,handledKey:""===C&&void 0!==I||""!==C&&void 0!==p,response:C,excludeTemplate:T,canAppendResponses:u});b.jumpToEnd()})}function G(b){return $jscomp.asyncExecutePromiseGeneratorProgram(function(g){a[c].jsonStringKey=b;p&&(d[t].jsonStringKeyDone=!0);N();g.jumpToEnd()})}function l(b){var h,f,l,p,v,n;return $jscomp.asyncExecutePromiseGeneratorProgram(function(q){switch(q.nextAddress){case 1:h=
b;f=h.nextKey;l=h.mainKeyManager;(p=h.mainKeyRepeated)&&U('The main key must not be included in the "Merge Template"');c=f;d[t]=l;keyInstance=d[t].pendingReset?(g[c]=void 0,void 0):a[c];if(!keyInstance){q.jumpTo(2);break}v=l;n=v.lastUpdatedKey;if(!l.canUpdateJsonString){n&&c!==n&&(a[c].jsonStringKey=k[c],keyInstance=a[c]);q.jumpTo(3);break}if(!Q){a[c].jsonStringKey=k[c];keyInstance=a[c];q.jumpTo(4);break}return q.yield(R(m,function(b){a[c].jsonStringKey=b[c];keyInstance=a[c]}),4);case 4:d[t].canUpdateJsonString=
void 0;case 3:d[t].lastUpdatedKey=c,g[c]=void 0;case 2:return q["return"](keyInstance)}})}function N(){function h(a){O?L?(la.postMessage([a,O]),la.onmessage=function(a){return K(a.data)}):K(O?ka(a,O):a):K(a)}return $jscomp.asyncExecutePromiseGeneratorProgram(function(w){return w["return"](new Promise(function(f,r){var z,w;return $jscomp.asyncExecutePromiseGeneratorProgram(function(n){switch(n.nextAddress){case 1:K=K||f;U=U||r;""===k&&U('First load "DJM._LoadJSONFileAsync()"');p&&(c=p.swappedKey);
J?C=(a[c]=b[c]=void 0,""):b[c]&&""===C?(z=a[c]=b[c],b[c]=void 0):z=a[c];if(!z){v();n.jumpTo(2);break}if(z.isLoadingJsonFile)return setTimeout(function(){return N()},0),n["return"]();if(ba)return h(z.savedInfo.resultObject),n["return"]();if(z.savedInfo.requiredResult)if(""!==C)z.savedInfo.requiredResult=void 0;else return z.savedInfo.requiredResult.isRequired=(z.savedInfo.requiredResult.hasRequired=void 0,!0),u&&(z.savedInfo.requiredResult.responses=z.savedInfo.resultObject.responses),h(z.savedInfo.requiredResult),
n["return"]();a[c].reloaded=z.canPrepareReloaded?k[c]:void 0;if(!I||""!==C||!d[t].jsonStringKeyDone){v(z);n.jumpTo(2);break}if(ea){aa.postMessage([t,I,d[t]]);aa.onmessage=function(a){var b;return $jscomp.asyncExecutePromiseGeneratorProgram(function(c){return 1==c.nextAddress?(b=v,c.yield(l(a.data),2)):c["return"](b(c.yieldResult))})};n.jumpTo(4);break}w=v;return n.yield(l(X(t,I,d[t])),5);case 5:w(n.yieldResult);case 4:d[t].jsonStringKeyDone=void 0;case 2:na.onmessage=function(f){var l=f.data,e=l.type;
f=l.data;l=l.swapKey;if("result"===e){e=f.savedInfo.resultObject;var n=f.jsonStringKey.length;if(e.isRepeatResponse){if(b[c]={},u&&(f.savedInfo.resultObject.responses=a[c].savedInfo.resultObject.responses),b[c]=f,!p){var v=b[c].canPrepareReloaded&&b[c].reloaded;b[c].canPrepareReloaded=1===n}}else a[c]=f,p?g[c]=l:(v=a[c].canPrepareReloaded&&a[c].reloaded,a[c].canPrepareReloaded=1===n);if(p)d[t].jsonStringKeyDone=l;else if(!v&&1>=n&&Q){var r=0===n;b[c]?b[c].isLoadingJsonFile=!0:a[c].isLoadingJsonFile=
!0;R(m,function(d){r&&(b[c]?b[c].jsonStringKey=d[c]:a[c].jsonStringKey=d[c]);b[c]?b[c].isLoadingJsonFile=void 0:a[c].isLoadingJsonFile=void 0})}h(e)}else"recall"===e?(a[c]=f,l?(d[t].jsonStringKeyDone=g[c]=!0,N()):Q?R(m,function(a){return G(a[c])}):G(k[c])):"exception"===e&&(l=f.savedInfo,v=l.resultObject,l=l.allNodesExcluded,a[c]=f,f=p&&l&&-1===d[t].lastKeyIndex,!p||!l||f&&B?U(v):(f&&(B=!0),d[t].jsonStringKeyDone=!0,N()))},n.jumpToEnd()}})}))})}c=void 0===c?"":c;var w=void 0===S?{}:S,C=void 0===w.response?
"":w.response,O=w.replaceTemplate,T=w.excludeTemplate,I=w.mergeTemplate,ba=void 0===w.lock?!1:w.lock,J=void 0===w.reset?!1:w.reset,K,U,p,t,B;return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){if(M)return a["return"](new Promise(function(a,b){chrome.runtime.sendMessage({DJM_Run:!0,data:{key:c,response:C,replaceTemplate:O,excludeTemplate:T,mergeTemplate:I,lock:ba,reset:J}},function(c){var d=c.success;c=c.error;d?a(d):b(c)})}));p=d[c];I&&(void 0===p||J)&&(d[c]={},d[c].lastKeyIndex=-1,d[c].swappedKey=
c,d[c].pendingReset=J,p=d[c]);t=c;return a["return"](N().then(function(a){return a})["catch"](function(a){throw Error(a);}))})};Z&&chrome.runtime.onMessage.addListener(function(a,b,d){a.DJM_IsJSONFileLoaded?d(""!==k):a.DJM_LoadJSONFileAsync?(a=a.jsonFileFullPath,""===k?R(a,d):d(k)):a.DJM_Settings?(a=a.data,fa({isRefreshable:a.isRefreshable,appendResponses:a.appendResponses,replaceOnWorker:a.replaceOnWorker,mergeOnWorker:a.mergeOnWorker})):a.DJM_Run&&(a=a.data,da(a.key,{response:a.response,replaceTemplate:a.replaceTemplate,
excludeTemplate:a.excludeTemplate,mergeTemplate:a.mergeTemplate,lock:a.lock}).then(function(a){return d({success:a})})["catch"](function(a){return d({error:a})}));return!0});return{_LoadJSONFileAsync:R,_Run:da,_RunDebounced:function(a){var b;return function(c,d){c=void 0===c?"":c;var g=void 0===d?{}:d,h=void 0===g.waitTime?300:g.waitTime,k=void 0===g.response?"":g.response,m=g.replaceTemplate,u=g.excludeTemplate,v=g.mergeTemplate,I=void 0===g.lock?!1:g.lock,G=void 0===g.reset?!1:g.reset;return $jscomp.asyncExecutePromiseGeneratorProgram(function(d){clearTimeout(b);
return d["return"](new Promise(function(d){b=setTimeout(function(){return d(a(c,{response:k,replaceTemplate:m,excludeTemplate:u,mergeTemplate:v,lock:I,reset:G}))},h)}))})}}(da),_Settings:fa,_TemplateGenerator:oa,_IsJSONFileLoadedAsCallback:function(a){Z&&M?chrome.runtime.sendMessage({DJM_IsJSONFileLoaded:!0},function(b){return a(b)}):a(""!==k)}}}();
